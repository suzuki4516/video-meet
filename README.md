# Video Meet - 2時間無料ビデオ会議アプリ

Google MeetやZoomのようなビデオ会議アプリのプロトタイプです。
2時間までの無料利用制限機能付き。

## 主要機能

- WebRTCによる1対1ビデオ通話
- 2時間タイマー（カウントダウン表示）
- 画面共有機能
- リアルタイムチャット
- ミュート/カメラON/OFF機能
- レスポンシブデザイン

## 技術スタック

- **フロントエンド**: Next.js (React), TypeScript
- **リアルタイム通信**: Socket.io
- **ビデオ通話**: WebRTC
- **スタイリング**: CSS

## セットアップ手順

### 1. 依存関係のインストール

```bash
npm install
```

### 2. アプリケーションの起動

**方法A: 統合サーバーで起動（スマホアクセス向け・推奨）**

1つのコマンドでNext.js + Socket.ioサーバーを起動:

```bash
npm run dev:full
```

アプリケーションとシグナリングサーバーが http://localhost:3000 で起動します。

**方法B: 別々のサーバーで起動（開発向け）**

ターミナル1でシグナリングサーバーを起動:
```bash
npm run server
```

ターミナル2でNext.jsアプリを起動:
```bash
npm run dev
```

## 使い方

### 会議を開始する

1. ブラウザで http://localhost:3000 にアクセス
2. ルームID（例: "meeting123"）を入力
3. 「ルームに参加」ボタンをクリック
4. カメラとマイクへのアクセスを許可

### 他のユーザーを招待する

1. 別のブラウザタブまたは別のデバイスで http://localhost:3000 を開く
2. 同じルームIDを入力
3. 「ルームに参加」ボタンをクリック

### 主要操作

- **ミュート**: 音声のON/OFF
- **カメラOFF**: ビデオのON/OFF
- **画面共有**: デスクトップやウィンドウを共有
- **チャット**: テキストメッセージを送信
- **退出**: 会議から退出

## 2時間制限について

- 会議参加時から自動的にカウントダウンが開始
- 画面上部に残り時間が表示されます
- 2時間経過すると自動的に会議が終了します
- 有料プランで無制限に拡張可能（未実装）

## プロジェクト構成

```
video-meet/
├── pages/
│   ├── _app.tsx          # Appコンポーネント
│   └── index.tsx         # メインページ（ビデオ会議UI）
├── styles/
│   └── globals.css       # グローバルスタイル
├── server.js             # Socket.ioシグナリングサーバー
├── package.json
├── tsconfig.json
└── README.md
```

## 今後の拡張案

### 基本機能
- [ ] 3人以上の複数人通話対応
- [ ] 録画機能
- [ ] バーチャル背景
- [ ] 手を挙げる機能
- [ ] 参加者一覧表示

### 認証・課金
- [ ] ユーザー認証（Auth0/Clerk）
- [ ] サブスクリプション（Stripe）
- [ ] 有料プラン（無制限時間、録画など）

### パフォーマンス
- [ ] Mediasoup/Jitsiによるスケーラブル化
- [ ] TURN/STUNサーバーの最適化
- [ ] 帯域制御・画質調整

### UI/UX
- [ ] ダークモード
- [ ] 多言語対応
- [ ] アクセシビリティ改善
- [ ] モバイルアプリ化（React Native）

## 開発メモ

### WebRTC接続フロー

1. ユーザーAがルームに参加
2. ユーザーBが同じルームに参加
3. ユーザーAが"user-connected"イベントを受信
4. ユーザーAがOfferを作成・送信
5. ユーザーBがOfferを受信、Answerを作成・送信
6. ICE Candidateの交換
7. ピア接続確立

### モバイルデバイスでの利用

**重要: モバイルでの使用にはHTTPS接続が必須です**

モバイルデバイス（iPhone、iPad、Android）では、セキュリティ上の理由からHTTPS接続が必須となります。

#### スマホからアクセスする手順

**ステップ1: 統合サーバーを起動**
```bash
npm run dev:full
```

**ステップ2: ngrokをインストール**
```bash
npm install -g ngrok
```

**ステップ3: ngrokでHTTPSトンネルを作成**

新しいターミナルを開いて:
```bash
ngrok http 3000
```

以下のような表示が出ます：
```
Forwarding   https://xxxx-xxx-xxx-xxx.ngrok-free.app -> http://localhost:3000
```

**ステップ4: スマホでアクセス**

表示された**HTTPSのURL**（`https://xxxx-xxx-xxx-xxx.ngrok-free.app`）をスマホのブラウザで開く

- Safari (iOS推奨)
- Chrome (Android推奨)

**ステップ5: カメラ・マイクの許可**

ブラウザがカメラとマイクへのアクセスを求めるので「許可」をタップ

#### その他の方法

**localtunnelを使用する方法**
```bash
npm install -g localtunnel
lt --port 3000
```

**本番環境へのデプロイ**
- Vercel、Netlify、Renderなどを利用

**モバイルでの制限事項**
- 画面共有機能は利用できません
- ブラウザによってはバックグラウンドで動作が制限される場合があります
- カメラは自動的にフロントカメラが使用されます

### トラブルシューティング

**カメラ・マイクが動作しない**
- ブラウザの設定でカメラ・マイクへのアクセスを許可
- **モバイルの場合**: 必ずHTTPS接続を使用（HTTP接続では動作しません）
- PCの場合: HTTPSまたはlocalhostでアクセス（WebRTCの要件）
- iOSの場合: Safari以外のブラウザでは制限がある場合があります
- Androidの場合: Chrome、Firefox、Edgeを推奨
- ブラウザのコンソールで詳細なエラーログを確認

**相手の映像が表示されない**
- 両方のユーザーが同じルームIDを使用しているか確認
- シグナリングサーバーが起動しているか確認
- ブラウザのコンソールでエラーを確認
- ネットワーク環境を確認（ファイアウォールやVPNの影響）

**画面共有ができない**
- 最新のブラウザを使用（Chrome, Firefox, Edge推奨）
- HTTPSまたはlocalhostでアクセス
- **モバイルデバイスでは画面共有は非対応です**

**音声が聞こえない**
- デバイスの音量を確認
- ブラウザのミュート設定を確認
- 相手側のマイクがミュートになっていないか確認

## ライセンス

MIT License

## 作成者

Claude Code

---

このプロトタイプは学習・検証用です。本番環境での使用には追加のセキュリティ対策とスケーラビリティの考慮が必要です。
